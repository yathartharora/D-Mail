{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\D-Mail\\\\pages\\\\index.js\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport web3 from '../Ethereum/web3';\nimport mail from '../Ethereum/mail';\nimport Layout from '../Components/Layout';\nimport { Form, Button, Input, Grid, List, Menu, Label, Icon } from 'semantic-ui-react';\nimport ipfs from '../ipfs';\nimport { Header, Segment } from 'semantic-ui-react';\nimport Phonebook from '../Components/Phonebook';\nimport Inbox from '../Components/Inbox';\nimport Sent from '../Components/Sent';\nimport Instruction from '../Components/Instruction';\n\nclass Mail extends Component {\n  constructor() {\n    super();\n\n    _defineProperty(this, \"onSubmit\", async event => {\n      event.preventDefault();\n      this.setState({\n        loading: true,\n        errorMessage: ''\n      });\n\n      try {\n        const accounts = await web3.eth.getAccounts();\n        console.log(accounts[0]);\n        await mail.methods.sendmessage(this.state.subject, this.state.body, this.state.send_to).send({\n          from: accounts[0],\n          gas: '1000000'\n        });\n      } catch (error) {\n        this.setState({\n          errorMessage: error.errormessage\n        });\n      }\n\n      this.setState({\n        loading: false\n      });\n    });\n\n    _defineProperty(this, \"show_write\", () => {\n      this.setState({\n        show_write: true\n      });\n      this.setState({\n        show_sent: false\n      });\n      this.setState({\n        show_inbox: false\n      });\n      this.setState({\n        addressbook: false\n      });\n    });\n\n    _defineProperty(this, \"show_addressbook\", () => {\n      this.setState({\n        show_write: false\n      });\n      this.setState({\n        show_sent: false\n      });\n      this.setState({\n        show_inbox: false\n      });\n      this.setState({\n        addressbook: true\n      });\n    });\n\n    _defineProperty(this, \"display\", () => {\n      this.setState({\n        show_write: false\n      });\n      this.setState({\n        show_sent: false\n      });\n      this.setState({\n        show_inbox: true\n      });\n      this.setState({\n        addressbook: false\n      });\n    });\n\n    _defineProperty(this, \"outbox\", () => {\n      this.setState({\n        show_write: false\n      });\n      this.setState({\n        show_sent: true\n      });\n      this.setState({\n        show_inbox: false\n      });\n      this.setState({\n        addressbook: false\n      });\n    });\n\n    _defineProperty(this, \"popcontent\", () => {\n      console.log(\"pop envoked\");\n    });\n\n    this.state = {\n      show_write: false,\n      show_inbox: false,\n      show_sent: false,\n      addressbook: false,\n      show_body: '',\n      loading: false,\n      errorMessage: '',\n      inbox_state: [],\n      sent_state: [],\n      send_to: '',\n      subject: '',\n      body: '',\n      buffer: null,\n      ipfsHash: '',\n      load: false,\n      active: true,\n      curtime: new Date().toLocaleString()\n    };\n    this.captureFile = this.captureFile.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.generate = this.generate.bind(this);\n    this.display = this.display.bind(this);\n    this.outbox = this.outbox.bind(this);\n    this.show_write = this.show_write.bind(this);\n    this.popcontent = this.popcontent.bind(this);\n    this.show_addressbook = this.show_addressbook.bind(this);\n  }\n\n  //IPFS Code\n  generate(event) {\n    event.preventDefault();\n    this.setState({\n      load: true\n    });\n    ipfs.files.add(this.state.buffer, (err, res) => {\n      if (err) {\n        console.log(err);\n        return;\n      }\n\n      this.setState({\n        ipfsHash: res[0].hash\n      });\n      console.log('ipfsHash: ', this.state.ipfsHash);\n      alert(`Please copy the generated URL to the mail body, otherwise your file won't be sent`);\n    });\n    this.setState({\n      active: false,\n      load: false\n    });\n  } //IPFS CODE\n\n\n  captureFile(event) {\n    event.preventDefault();\n    console.log('Capture File...');\n    const file = event.target.files[0];\n    const reader = new window.FileReader();\n    reader.readAsArrayBuffer(file);\n\n    reader.onloadend = () => {\n      this.setState({\n        buffer: Buffer(reader.result)\n      });\n      console.log('buffer ', this.state.buffer);\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        columns: 1,\n        children: [/*#__PURE__*/_jsxDEV(Grid.Row, {\n          centered: true,\n          children: [\" \", /*#__PURE__*/_jsxDEV(Menu, {\n            inverted: true,\n            size: \"massive\",\n            widths: 16,\n            children: /*#__PURE__*/_jsxDEV(Menu.Item, {\n              name: \"Dmail\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Grid.Row, {\n          children: [/*#__PURE__*/_jsxDEV(Grid.Column, {\n            width: 4,\n            floated: \"left\",\n            children: /*#__PURE__*/_jsxDEV(Segment, {\n              stacked: true,\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                color: \"teal\",\n                icon: true,\n                labelPosition: \"right\",\n                fluid: true,\n                size: \"large\",\n                style: {\n                  margin: \"0px 0px 10px 0px\"\n                },\n                onClick: this.show_write,\n                children: [\"New Mail \", /*#__PURE__*/_jsxDEV(Icon, {\n                  name: \"plus\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 158\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                color: \"teal\",\n                fluid: true,\n                size: \"large\",\n                style: {\n                  margin: \"0px 0px 10px 0px\"\n                },\n                onClick: this.display,\n                children: \"Inbox\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                color: \"teal\",\n                fluid: true,\n                size: \"large\",\n                style: {\n                  margin: \"0px 0px 10px 0px\"\n                },\n                onClick: this.outbox,\n                children: \"Sent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                color: \"teal\",\n                fluid: true,\n                size: \"large\",\n                style: {\n                  margin: \"0px 0px 10px 0px\"\n                },\n                onClick: this.show_addressbook,\n                children: \"Address Book\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 17\n          }, this), this.state.addressbook && /*#__PURE__*/_jsxDEV(Phonebook, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 41\n          }, this), this.state.show_write && /*#__PURE__*/_jsxDEV(Grid.Column, {\n            centered: true,\n            width: 12,\n            children: [/*#__PURE__*/_jsxDEV(Form, {\n              children: /*#__PURE__*/_jsxDEV(Segment, {\n                stacked: true,\n                children: [/*#__PURE__*/_jsxDEV(Form.Input, {\n                  fluid: true,\n                  label: \"Receiver Address:\",\n                  icon: \"user\",\n                  iconPosition: \"left\",\n                  placeholder: \"Enter receipient address\",\n                  value: this.state.send_to,\n                  onChange: event => this.setState({\n                    send_to: event.target.value\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n                  fluid: true,\n                  label: \"Subject\",\n                  placeholder: \"Enter the Subject\",\n                  value: this.state.subject,\n                  onChange: event => this.setState({\n                    subject: event.target.value\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Form.TextArea, {\n                  label: \"Message :\",\n                  placeholder: \"Type your message\",\n                  value: this.state.body,\n                  onChange: event => this.setState({\n                    body: event.target.value\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 22\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Upload File\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Input, {\n                  type: \"file\",\n                  onChange: this.captureFile\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 26\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  centered: true,\n                  loading: this.state.loading,\n                  onClick: this.onSubmit,\n                  children: \"Send\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              primary: true,\n              onClick: this.generate,\n              children: \"Generate\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 17\n            }, this), \"File URL: https://ipfs.io/\", this.state.ipfsHash]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 16\n          }, this), this.state.show_inbox && /*#__PURE__*/_jsxDEV(Inbox, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 40\n          }, this), this.state.show_sent && /*#__PURE__*/_jsxDEV(Sent, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Mail;","map":{"version":3,"sources":["C:/Users/user/Desktop/D-Mail/pages/index.js"],"names":["React","Component","web3","mail","Layout","Form","Button","Input","Grid","List","Menu","Label","Icon","ipfs","Header","Segment","Phonebook","Inbox","Sent","Instruction","Mail","constructor","event","preventDefault","setState","loading","errorMessage","accounts","eth","getAccounts","console","log","methods","sendmessage","state","subject","body","send_to","send","from","gas","error","errormessage","show_write","show_sent","show_inbox","addressbook","show_body","inbox_state","sent_state","buffer","ipfsHash","load","active","curtime","Date","toLocaleString","captureFile","bind","onSubmit","generate","display","outbox","popcontent","show_addressbook","files","add","err","res","hash","alert","file","target","reader","window","FileReader","readAsArrayBuffer","onloadend","Buffer","result","render","margin","value"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAAQC,IAAR,EAAcC,MAAd,EAAsBC,KAAtB,EAA6BC,IAA7B,EAAmCC,IAAnC,EAAwCC,IAAxC,EAA6CC,KAA7C,EAAmDC,IAAnD,QAA8D,mBAA9D;AACA,OAAOC,IAAP,MAAiB,SAAjB;AACA,SAASC,MAAT,EAAiBC,OAAjB,QAAgC,mBAAhC;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;;AAEA,MAAMC,IAAN,SAAmBnB,SAAnB,CAA4B;AAGxBoB,EAAAA,WAAW,GAAE;AACT;;AADS,sCAiCF,MAAOC,KAAP,IAAiB;AACxBA,MAAAA,KAAK,CAACC,cAAN;AACA,WAAKC,QAAL,CAAc;AAACC,QAAAA,OAAO,EAAE,IAAV;AAAgBC,QAAAA,YAAY,EAAC;AAA7B,OAAd;;AACA,UAAI;AACA,cAAMC,QAAQ,GAAG,MAAMzB,IAAI,CAAC0B,GAAL,CAASC,WAAT,EAAvB;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAQ,CAAC,CAAD,CAApB;AACA,cAAMxB,IAAI,CAAC6B,OAAL,CAAaC,WAAb,CAAyB,KAAKC,KAAL,CAAWC,OAApC,EAA4C,KAAKD,KAAL,CAAWE,IAAvD,EAA4D,KAAKF,KAAL,CAAWG,OAAvE,EAAgFC,IAAhF,CAAqF;AACvFC,UAAAA,IAAI,EAAEZ,QAAQ,CAAC,CAAD,CADyE;AAEvFa,UAAAA,GAAG,EAAE;AAFkF,SAArF,CAAN;AAIH,OAPD,CAOE,OAAOC,KAAP,EAAc;AACZ,aAAKjB,QAAL,CAAc;AAACE,UAAAA,YAAY,EAAEe,KAAK,CAACC;AAArB,SAAd;AACH;;AACD,WAAKlB,QAAL,CAAc;AAACC,QAAAA,OAAO,EAAE;AAAV,OAAd;AAEH,KAhDY;;AAAA,wCAiFA,MAAM;AACd,WAAKD,QAAL,CAAc;AAACmB,QAAAA,UAAU,EAAE;AAAb,OAAd;AACA,WAAKnB,QAAL,CAAc;AAACoB,QAAAA,SAAS,EAAE;AAAZ,OAAd;AACA,WAAKpB,QAAL,CAAc;AAACqB,QAAAA,UAAU,EAAE;AAAb,OAAd;AACA,WAAKrB,QAAL,CAAc;AAACsB,QAAAA,WAAW,EAAC;AAAb,OAAd;AACJ,KAtFY;;AAAA,8CAwFK,MAAM;AACpB,WAAKtB,QAAL,CAAc;AAACmB,QAAAA,UAAU,EAAE;AAAb,OAAd;AACA,WAAKnB,QAAL,CAAc;AAACoB,QAAAA,SAAS,EAAE;AAAZ,OAAd;AACA,WAAKpB,QAAL,CAAc;AAACqB,QAAAA,UAAU,EAAE;AAAb,OAAd;AACA,WAAKrB,QAAL,CAAc;AAACsB,QAAAA,WAAW,EAAC;AAAb,OAAd;AACJ,KA7Fa;;AAAA,qCA+FF,MAAM;AACT,WAAKtB,QAAL,CAAc;AAACmB,QAAAA,UAAU,EAAE;AAAb,OAAd;AACA,WAAKnB,QAAL,CAAc;AAACoB,QAAAA,SAAS,EAAE;AAAZ,OAAd;AACA,WAAKpB,QAAL,CAAc;AAACqB,QAAAA,UAAU,EAAE;AAAb,OAAd;AACA,WAAKrB,QAAL,CAAc;AAACsB,QAAAA,WAAW,EAAC;AAAb,OAAd;AAEH,KArGQ;;AAAA,oCAwGJ,MAAM;AACP,WAAKtB,QAAL,CAAc;AAACmB,QAAAA,UAAU,EAAE;AAAb,OAAd;AACA,WAAKnB,QAAL,CAAc;AAACoB,QAAAA,SAAS,EAAE;AAAZ,OAAd;AACA,WAAKpB,QAAL,CAAc;AAACqB,QAAAA,UAAU,EAAE;AAAb,OAAd;AACA,WAAKrB,QAAL,CAAc;AAACsB,QAAAA,WAAW,EAAC;AAAb,OAAd;AACP,KA7GY;;AAAA,wCA+GA,MAAM;AACfhB,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACH,KAjHY;;AAET,SAAKG,KAAL,GAAa;AACTS,MAAAA,UAAU,EAAE,KADH;AAETE,MAAAA,UAAU,EAAE,KAFH;AAGTD,MAAAA,SAAS,EAAE,KAHF;AAITE,MAAAA,WAAW,EAAC,KAJH;AAKTC,MAAAA,SAAS,EAAE,EALF;AAMTtB,MAAAA,OAAO,EAAE,KANA;AAOTC,MAAAA,YAAY,EAAE,EAPL;AAQTsB,MAAAA,WAAW,EAAC,EARH;AASTC,MAAAA,UAAU,EAAC,EATF;AAUTZ,MAAAA,OAAO,EAAE,EAVA;AAWTF,MAAAA,OAAO,EAAE,EAXA;AAYTC,MAAAA,IAAI,EAAE,EAZG;AAaTc,MAAAA,MAAM,EAAE,IAbC;AAcTC,MAAAA,QAAQ,EAAE,EAdD;AAeTC,MAAAA,IAAI,EAAE,KAfG;AAgBTC,MAAAA,MAAM,EAAE,IAhBC;AAiBTC,MAAAA,OAAO,EAAG,IAAIC,IAAJ,GAAWC,cAAX;AAjBD,KAAb;AAmBA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKC,QAAL,GAAgB,KAAKA,QAAL,CAAcD,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKE,QAAL,GAAgB,KAAKA,QAAL,CAAcF,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKG,OAAL,GAAe,KAAKA,OAAL,CAAaH,IAAb,CAAkB,IAAlB,CAAf;AACA,SAAKI,MAAL,GAAc,KAAKA,MAAL,CAAYJ,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAKf,UAAL,GAAkB,KAAKA,UAAL,CAAgBe,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKK,UAAL,GAAkB,KAAKA,UAAL,CAAgBL,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKM,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBN,IAAtB,CAA2B,IAA3B,CAAxB;AACH;;AAoBD;AACAE,EAAAA,QAAQ,CAACtC,KAAD,EAAQ;AACZA,IAAAA,KAAK,CAACC,cAAN;AACA,SAAKC,QAAL,CAAc;AAAC4B,MAAAA,IAAI,EAAE;AAAP,KAAd;AACAvC,IAAAA,IAAI,CAACoD,KAAL,CAAWC,GAAX,CAAe,KAAKhC,KAAL,CAAWgB,MAA1B,EAAkC,CAACiB,GAAD,EAAMC,GAAN,KAAc;AAC5C,UAAGD,GAAH,EAAO;AACHrC,QAAAA,OAAO,CAACC,GAAR,CAAYoC,GAAZ;AACA;AACH;;AACD,WAAK3C,QAAL,CAAc;AAAC2B,QAAAA,QAAQ,EAAEiB,GAAG,CAAC,CAAD,CAAH,CAAOC;AAAlB,OAAd;AACAvC,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0B,KAAKG,KAAL,CAAWiB,QAArC;AACAmB,MAAAA,KAAK,CAAE,mFAAF,CAAL;AACH,KARD;AASA,SAAK9C,QAAL,CAAc;AAAC6B,MAAAA,MAAM,EAAE,KAAT;AAAgBD,MAAAA,IAAI,EAAE;AAAtB,KAAd;AAGH,GApEuB,CAqExB;;;AACAK,EAAAA,WAAW,CAACnC,KAAD,EAAQ;AACfA,IAAAA,KAAK,CAACC,cAAN;AACAO,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AAEA,UAAMwC,IAAI,GAAGjD,KAAK,CAACkD,MAAN,CAAaP,KAAb,CAAmB,CAAnB,CAAb;AACA,UAAMQ,MAAM,GAAG,IAAIC,MAAM,CAACC,UAAX,EAAf;AACAF,IAAAA,MAAM,CAACG,iBAAP,CAAyBL,IAAzB;;AAEAE,IAAAA,MAAM,CAACI,SAAP,GAAmB,MAAM;AACrB,WAAKrD,QAAL,CAAc;AAAC0B,QAAAA,MAAM,EAAE4B,MAAM,CAACL,MAAM,CAACM,MAAR;AAAf,OAAd;AACAjD,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAsB,KAAKG,KAAL,CAAWgB,MAAjC;AACH,KAHD;AAIH;;AAmCD8B,EAAAA,MAAM,GAAE;AACJ,wBACI,QAAC,MAAD;AAAA,6BAEI,QAAC,IAAD;AAAM,QAAA,OAAO,EAAE,CAAf;AAAA,gCACA,QAAC,IAAD,CAAM,GAAN;AAAU,UAAA,QAAQ,MAAlB;AAAA,uCAAoB,QAAC,IAAD;AAAM,YAAA,QAAQ,MAAd;AAAe,YAAA,IAAI,EAAE,SAArB;AAAgC,YAAA,MAAM,EAAE,EAAxC;AAAA,mCACpB,QAAC,IAAD,CAAM,IAAN;AACA,cAAA,IAAI,EAAC;AADL;AAAA;AAAA;AAAA;AAAA;AADoB;AAAA;AAAA;AAAA;AAAA,kBAApB;AAAA;AAAA;AAAA;AAAA;AAAA,gBADA,eAQA,QAAC,IAAD,CAAM,GAAN;AAAA,kCAKA,QAAC,IAAD,CAAM,MAAN;AAAa,YAAA,KAAK,EAAE,CAApB;AAAuB,YAAA,OAAO,EAAC,MAA/B;AAAA,mCACA,QAAC,OAAD;AAAS,cAAA,OAAO,MAAhB;AAAA,sCACA,QAAC,MAAD;AAAQ,gBAAA,KAAK,EAAC,MAAd;AAAqB,gBAAA,IAAI,MAAzB;AAA0B,gBAAA,aAAa,EAAC,OAAxC;AAAgD,gBAAA,KAAK,MAArD;AAAsD,gBAAA,IAAI,EAAC,OAA3D;AAAmE,gBAAA,KAAK,EAAE;AAAEC,kBAAAA,MAAM,EAAE;AAAV,iBAA1E;AAA0G,gBAAA,OAAO,EAAE,KAAKtC,UAAxH;AAAA,qDAA6I,QAAC,IAAD;AAAM,kBAAA,IAAI,EAAC;AAAX;AAAA;AAAA;AAAA;AAAA,wBAA7I;AAAA;AAAA;AAAA;AAAA;AAAA,sBADA,eAEA,QAAC,MAAD;AAAQ,gBAAA,KAAK,EAAC,MAAd;AAAqB,gBAAA,KAAK,MAA1B;AAA2B,gBAAA,IAAI,EAAC,OAAhC;AAAwC,gBAAA,KAAK,EAAE;AAAEsC,kBAAAA,MAAM,EAAE;AAAV,iBAA/C;AAA+E,gBAAA,OAAO,EAAE,KAAKpB,OAA7F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFA,eAGA,QAAC,MAAD;AAAQ,gBAAA,KAAK,EAAC,MAAd;AAAqB,gBAAA,KAAK,MAA1B;AAA2B,gBAAA,IAAI,EAAC,OAAhC;AAAwC,gBAAA,KAAK,EAAE;AAAEoB,kBAAAA,MAAM,EAAE;AAAV,iBAA/C;AAA+E,gBAAA,OAAO,EAAE,KAAKnB,MAA7F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAHA,eAIA,QAAC,MAAD;AAAQ,gBAAA,KAAK,EAAC,MAAd;AAAqB,gBAAA,KAAK,MAA1B;AAA2B,gBAAA,IAAI,EAAC,OAAhC;AAAwC,gBAAA,KAAK,EAAE;AAAEmB,kBAAAA,MAAM,EAAE;AAAV,iBAA/C;AAA+E,gBAAA,OAAO,EAAE,KAAKjB,gBAA7F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,kBALA,EAeF,KAAK9B,KAAL,CAAWY,WAAX,iBAA0B,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA,kBAfxB,EAmBD,KAAKZ,KAAL,CAAWS,UAAX,iBAEA,QAAC,IAAD,CAAM,MAAN;AAAa,YAAA,QAAQ,MAArB;AAAsB,YAAA,KAAK,EAAE,EAA7B;AAAA,oCAEC,QAAC,IAAD;AAAA,qCACI,QAAC,OAAD;AAAS,gBAAA,OAAO,MAAhB;AAAA,wCAGA,QAAC,IAAD,CAAM,KAAN;AAAY,kBAAA,KAAK,MAAjB;AACC,kBAAA,KAAK,EAAC,mBADP;AAEC,kBAAA,IAAI,EAAC,MAFN;AAGC,kBAAA,YAAY,EAAC,MAHd;AAIC,kBAAA,WAAW,EAAG,0BAJf;AAKC,kBAAA,KAAK,EAAI,KAAKT,KAAL,CAAWG,OALrB;AAMC,kBAAA,QAAQ,EAAIf,KAAK,IAAI,KAAKE,QAAL,CAAc;AAACa,oBAAAA,OAAO,EAAEf,KAAK,CAACkD,MAAN,CAAaU;AAAvB,mBAAd;AANtB;AAAA;AAAA;AAAA;AAAA,wBAHA,eAcA,QAAC,IAAD,CAAM,KAAN;AAAY,kBAAA,KAAK,MAAjB;AACC,kBAAA,KAAK,EAAC,SADP;AAEC,kBAAA,WAAW,EAAG,mBAFf;AAGC,kBAAA,KAAK,EAAI,KAAKhD,KAAL,CAAWC,OAHrB;AAIC,kBAAA,QAAQ,EAAIb,KAAK,IAAI,KAAKE,QAAL,CAAc;AAACW,oBAAAA,OAAO,EAAEb,KAAK,CAACkD,MAAN,CAAaU;AAAvB,mBAAd;AAJtB;AAAA;AAAA;AAAA;AAAA,wBAdA,eAoBC,QAAC,IAAD,CAAM,QAAN;AACA,kBAAA,KAAK,EAAC,WADN;AAEA,kBAAA,WAAW,EAAG,mBAFd;AAGA,kBAAA,KAAK,EAAI,KAAKhD,KAAL,CAAWE,IAHpB;AAIA,kBAAA,QAAQ,EAAId,KAAK,IAAI,KAAKE,QAAL,CAAc;AAACY,oBAAAA,IAAI,EAAEd,KAAK,CAACkD,MAAN,CAAaU;AAApB,mBAAd;AAJrB;AAAA;AAAA;AAAA;AAAA,wBApBD,eA2BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBA3BA,eA4BA;AAAA;AAAA;AAAA;AAAA,wBA5BA,eA6BA,QAAC,KAAD;AACI,kBAAA,IAAI,EAAC,MADT;AAEI,kBAAA,QAAQ,EAAI,KAAKzB;AAFrB;AAAA;AAAA;AAAA;AAAA,wBA7BA,eAiCA;AAAA;AAAA;AAAA;AAAA,wBAjCA,eAiCK;AAAA;AAAA;AAAA;AAAA,wBAjCL,eAkCA,QAAC,MAAD;AAAQ,kBAAA,QAAQ,MAAhB;AAAkB,kBAAA,OAAO,EAAE,KAAKvB,KAAL,CAAWT,OAAtC;AAA+C,kBAAA,OAAO,EAAE,KAAKkC,QAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAlCA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBAFD,eAyCC,QAAC,MAAD;AAAQ,cAAA,OAAO,MAAf;AAAgB,cAAA,OAAO,EAAE,KAAKC,QAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAzCD,gCA0C4B,KAAK1B,KAAL,CAAWiB,QA1CvC;AAAA;AAAA;AAAA;AAAA;AAAA,kBArBC,EAqEF,KAAKjB,KAAL,CAAWW,UAAX,iBAAyB,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA,kBArEvB,EAsEF,KAAKX,KAAL,CAAWU,SAAX,iBAA0B,QAAC,IAAD;AAAA;AAAA;AAAA;AAAA,kBAtExB;AAAA;AAAA;AAAA;AAAA;AAAA,gBARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,YADJ;AAyFH;;AA/MuB;;AAoN5B,eAAexB,IAAf","sourcesContent":["import React, {Component} from 'react';\r\nimport web3 from '../Ethereum/web3';\r\nimport mail from '../Ethereum/mail';\r\nimport Layout from '../Components/Layout';\r\nimport {Form, Button, Input, Grid, List,Menu,Label,Icon} from 'semantic-ui-react';\r\nimport ipfs from '../ipfs';\r\nimport { Header, Segment } from 'semantic-ui-react';\r\nimport Phonebook from '../Components/Phonebook';\r\nimport Inbox from '../Components/Inbox';\r\nimport Sent from '../Components/Sent';\r\nimport Instruction from '../Components/Instruction';\r\n\r\nclass Mail extends Component{\r\n\r\n\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            show_write: false,\r\n            show_inbox: false,\r\n            show_sent: false,\r\n            addressbook:false,\r\n            show_body: '',\r\n            loading: false,\r\n            errorMessage: '',\r\n            inbox_state:[],\r\n            sent_state:[],\r\n            send_to: '',\r\n            subject: '',\r\n            body: '',\r\n            buffer: null,\r\n            ipfsHash: '',\r\n            load: false,\r\n            active: true,\r\n            curtime : new Date().toLocaleString()\r\n        }\r\n        this.captureFile = this.captureFile.bind(this);\r\n        this.onSubmit = this.onSubmit.bind(this);\r\n        this.generate = this.generate.bind(this);\r\n        this.display = this.display.bind(this);\r\n        this.outbox = this.outbox.bind(this);\r\n        this.show_write = this.show_write.bind(this);\r\n        this.popcontent = this.popcontent.bind(this);\r\n        this.show_addressbook = this.show_addressbook.bind(this);\r\n    }\r\n\r\n    \r\n\r\n    onSubmit = async (event) => {\r\n        event.preventDefault();\r\n        this.setState({loading: true, errorMessage:''});\r\n        try {\r\n            const accounts = await web3.eth.getAccounts();\r\n            console.log(accounts[0]);\r\n            await mail.methods.sendmessage(this.state.subject,this.state.body,this.state.send_to).send({\r\n                from: accounts[0],\r\n                gas: '1000000'\r\n            });\r\n        } catch (error) {\r\n            this.setState({errorMessage: error.errormessage});\r\n        }\r\n        this.setState({loading: false});\r\n\r\n    }\r\n    //IPFS Code\r\n    generate(event) {\r\n        event.preventDefault();\r\n        this.setState({load: true});\r\n        ipfs.files.add(this.state.buffer, (err, res) => {\r\n            if(err){\r\n                console.log(err)\r\n                return\r\n            }\r\n            this.setState({ipfsHash: res[0].hash})\r\n            console.log('ipfsHash: ', this.state.ipfsHash);\r\n            alert(`Please copy the generated URL to the mail body, otherwise your file won't be sent`);\r\n        })\r\n        this.setState({active: false, load: false});\r\n        \r\n        \r\n    }\r\n    //IPFS CODE\r\n    captureFile(event) {\r\n        event.preventDefault();\r\n        console.log('Capture File...')\r\n\r\n        const file = event.target.files[0];\r\n        const reader = new window.FileReader();\r\n        reader.readAsArrayBuffer(file);\r\n\r\n        reader.onloadend = () => {\r\n            this.setState({buffer: Buffer(reader.result)})\r\n            console.log('buffer ',this.state.buffer);\r\n        }\r\n    }\r\n\r\n    show_write = () => {\r\n         this.setState({show_write: true});\r\n         this.setState({show_sent: false});\r\n         this.setState({show_inbox: false});\r\n         this.setState({addressbook:false});\r\n    }\r\n\r\n    show_addressbook= () => {\r\n        this.setState({show_write: false});\r\n        this.setState({show_sent: false});\r\n        this.setState({show_inbox: false});\r\n        this.setState({addressbook:true});\r\n   }\r\n    //Inbox - display the messages that I have received from others\r\n    display =  () => {\r\n            this.setState({show_write: false});\r\n            this.setState({show_sent: false});\r\n            this.setState({show_inbox: true});\r\n            this.setState({addressbook:false});\r\n           \r\n        } \r\n    \r\n   //sent\r\n    outbox = () => {\r\n            this.setState({show_write: false});\r\n            this.setState({show_sent: true});\r\n            this.setState({show_inbox: false});\r\n            this.setState({addressbook:false});\r\n    }\r\n\r\n    popcontent = () => {\r\n        console.log(\"pop envoked\");\r\n    }\r\n    render(){\r\n        return(\r\n            <Layout>\r\n               \r\n                <Grid columns={1}>\r\n                <Grid.Row centered> <Menu inverted size={\"massive\"} widths={16}>\r\n                <Menu.Item\r\n                name='Dmail'\r\n                /></Menu>\r\n                \r\n                </Grid.Row>\r\n\r\n                <Grid.Row >\r\n\r\n                {/*sidebar  improvement - will shift to vertical menu */}\r\n                \r\n               \r\n                <Grid.Column width={4} floated=\"left\">\r\n                <Segment stacked>  \r\n                <Button color='teal' icon labelPosition='right' fluid size='large' style={{ margin :\"0px 0px 10px 0px\" }} onClick={this.show_write}>New Mail <Icon name='plus' /></Button>  \r\n                <Button color='teal' fluid size='large' style={{ margin :\"0px 0px 10px 0px\" }} onClick={this.display}>Inbox</Button>\r\n                <Button color='teal' fluid size='large' style={{ margin :\"0px 0px 10px 0px\" }} onClick={this.outbox}>Sent</Button>\r\n                <Button color='teal' fluid size='large' style={{ margin :\"0px 0px 10px 0px\" }} onClick={this.show_addressbook}>Address Book</Button>\r\n                \r\n                </Segment>\r\n                </Grid.Column>\r\n             {/*Address Book Column */}\r\n             {this.state.addressbook && <Phonebook/>}\r\n             \r\n                {/*Write mail section */}\r\n               { \r\n               this.state.show_write && \r\n               \r\n               <Grid.Column centered width={12}>\r\n                \r\n                <Form >\r\n                    <Segment stacked>\r\n                    \r\n\r\n                    <Form.Input fluid\r\n                     label=\"Receiver Address:\"\r\n                     icon='user' \r\n                     iconPosition='left' \r\n                     placeholder = \"Enter receipient address\"\r\n                     value = {this.state.send_to}\r\n                     onChange = {event => this.setState({send_to: event.target.value})}\r\n                      />\r\n                   \r\n                   \r\n                    \r\n                    <Form.Input fluid\r\n                     label=\"Subject\"\r\n                     placeholder = \"Enter the Subject\"\r\n                     value = {this.state.subject}\r\n                     onChange = {event => this.setState({subject: event.target.value})} />\r\n\r\n                     <Form.TextArea \r\n                     label=\"Message :\"\r\n                     placeholder = \"Type your message\"\r\n                     value = {this.state.body}\r\n                     onChange = {event => this.setState({body: event.target.value})}/>\r\n  \r\n                    \r\n                    <label>Upload File</label>\r\n                    <br/>\r\n                    <Input \r\n                        type='file'\r\n                        onChange = {this.captureFile}\r\n                    />\r\n                    <br/><br/>\r\n                    <Button centered  loading={this.state.loading} onClick={this.onSubmit}>Send</Button> \r\n                    </Segment>  \r\n                </Form>\r\n               \r\n                <Button primary onClick={this.generate}>Generate</Button>\r\n                File URL: https://ipfs.io/{this.state.ipfsHash}\r\n          \r\n                </Grid.Column>\r\n                }\r\n\r\n\r\n            { this.state.show_inbox && <Inbox/>}\r\n            { this.state.show_sent  &&  <Sent/>}\r\n            \r\n\r\n            </Grid.Row>\r\n            </Grid>\r\n                \r\n            </Layout>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default Mail;"]},"metadata":{},"sourceType":"module"}